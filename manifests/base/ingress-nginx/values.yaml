controller:
  replicaCount: 2
  # We port-forward all internet traffic to server-1.
  # If we run on server-2 and traffic comes through server-1 we lose the original IP because
  # https://github.com/k3s-io/klipper-lb/issues/31
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          preference:
            matchExpressions:
              - key: kubernetes.io/hostname
                operator: In
                values: ["server-1"]
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
  config:
    allow-snippet-annotations: "true"
    enable-brotli: "true"
    brotli-level: "7"
    brotli-types: "*"
    gzip-types: "*"
    use-gzip: "true"
  enableAnnotationValidations: true
  podLabels:
    type: ingress
